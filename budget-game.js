// –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –∏–≥—Ä—ã "–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ä–∞—Å—Ö–æ–¥–æ–≤"
function initBudgetGame() {
    const budgetContent = document.getElementById('budget-content');
    
    if (!budgetContent) {
        console.error('–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä budget-content –Ω–µ –Ω–∞–π–¥–µ–Ω!');
        return;
    }
    
    const profiles = [
        {
            id: 1,
            name: "üë®‚Äçüíº –ú–æ–ª–æ–¥–∞—è –ø–∞—Ä–∞",
            description: "–ê–ª–µ–∫—Å–µ–π –∏ –ò—Ä–∏–Ω–∞, 28 –ª–µ—Ç. –û–±–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ IT, —Å–Ω–∏–º–∞—é—Ç –∫–≤–∞—Ä—Ç–∏—Ä—É, –ø–ª–∞–Ω–∏—Ä—É—é—Ç –ø–æ–∫—É–ø–∫—É –∂–∏–ª—å—è —á–µ—Ä–µ–∑ 3 –≥–æ–¥–∞.",
            income: "180 000 —Ä—É–±/–º–µ—Å",
            expenses: {
                "–ê—Ä–µ–Ω–¥–∞": 40000,
                "–ü–∏—Ç–∞–Ω–∏–µ": 30000,
                "–ê–≤—Ç–æ–º–æ–±–∏–ª—å": 15000,
                "–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è": 20000,
                "–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è": 15000
            },
            goals: ["–ù–∞–∫–æ–ø–∏—Ç—å –Ω–∞ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å", "–°–æ–∑–¥–∞—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é –ø–æ–¥—É—à–∫—É"],
            correctChoices: ["–°–æ–∫—Ä–∞—Ç–∏—Ç—å —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è –Ω–∞ 5 000", "–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∏—Ç–∞–Ω–∏–µ", "–£–≤–µ–ª–∏—á–∏—Ç—å –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è"],
            incorrectChoices: ["–í–∑—è—Ç—å –∫—Ä–µ–¥–∏—Ç –Ω–∞ –æ—Ç–¥—ã—Ö", "–ö—É–ø–∏—Ç—å –Ω–æ–≤—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å", "–£–≤–µ–ª–∏—á–∏—Ç—å –∞—Ä–µ–Ω–¥—É"]
        },
        {
            id: 2,
            name: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –°–µ–º—å—è —Å –¥–µ—Ç—å–º–∏",
            description: "–°–µ—Ä–≥–µ–π –∏ –û–ª—å–≥–∞, 38 –ª–µ—Ç. –î–≤–æ–µ –¥–µ—Ç–µ–π, –∏–ø–æ—Ç–µ—á–Ω–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞, –¥–≤–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è.",
            income: "220 000 —Ä—É–±/–º–µ—Å",
            expenses: {
                "–ò–ø–æ—Ç–µ–∫–∞": 40000,
                "–ü–∏—Ç–∞–Ω–∏–µ": 45000,
                "–ê–≤—Ç–æ–º–æ–±–∏–ª–∏": 25000,
                "–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ": 20000,
                "–ö–æ–º–º—É–Ω–∞–ª–∫–∞": 8000,
                "–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è": 12000
            },
            goals: ["–ù–∞–∫–æ–ø–∏—Ç—å –Ω–∞ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–µ—Ç–µ–π", "–°–¥–µ–ª–∞—Ç—å —Ä–µ–º–æ–Ω—Ç", "–û—Ç–ø—É—Å–∫"],
            correctChoices: ["–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç", "–°–æ–∫—Ä–∞—Ç–∏—Ç—å —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è", "–ò—Å–∫–∞—Ç—å —Å–∫–∏–¥–∫–∏ –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ"],
            incorrectChoices: ["–í–∑—è—Ç—å –∫—Ä–µ–¥–∏—Ç –Ω–∞ –æ—Ç–ø—É—Å–∫", "–ü—Ä–æ–¥–∞—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—å", "–û—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –¥–æ–ø. –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è"]
        },
        {
            id: 3,
            name: "üëµ –ü–µ–Ω—Å–∏–æ–Ω–µ—Ä–∫–∞",
            description: "–ì–∞–ª–∏–Ω–∞ –ü–µ—Ç—Ä–æ–≤–Ω–∞, 68 –ª–µ—Ç. –ñ–∏–≤–µ—Ç –æ–¥–Ω–∞, –Ω–µ–±–æ–ª—å—à–∞—è –ø–µ–Ω—Å–∏—è, —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è.",
            income: "25 000 —Ä—É–±/–º–µ—Å",
            expenses: {
                "–ö–æ–º–º—É–Ω–∞–ª–∫–∞": 6000,
                "–ü–∏—Ç–∞–Ω–∏–µ": 10000,
                "–ú–µ–¥–∏—Ü–∏–Ω–∞": 3000,
                "–ü–æ–º–æ—â—å –≤–Ω—É–∫–∞–º": 2000,
                "–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è": 1000
            },
            goals: ["–†–µ–∑–µ—Ä–≤ –Ω–∞ –ª–µ—á–µ–Ω–∏–µ", "–ù–µ–±–æ–ª—å—à–æ–π —Ä–µ–º–æ–Ω—Ç"],
            correctChoices: ["–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞—Ç–µ–∂–∏", "–ò—Å–∫–∞—Ç—å –ª—å–≥–æ—Ç—ã", "–°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤"],
            incorrectChoices: ["–í–∑—è—Ç—å –∫—Ä–µ–¥–∏—Ç", "–ü—Ä–æ–¥–∞—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—É", "–û—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –ª–µ—á–µ–Ω–∏—è"]
        },
        {
            id: 4,
            name: "üéì –°—Ç—É–¥–µ–Ω—Ç",
            description: "–î–º–∏—Ç—Ä–∏–π, 20 –ª–µ—Ç. –£—á–∏—Ç—Å—è –≤ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ, –∂–∏–≤–µ—Ç –≤ –æ–±—â–µ–∂–∏—Ç–∏–∏, –ø–æ–¥—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫—É—Ä—å–µ—Ä–æ–º.",
            income: "15 000 —Ä—É–±/–º–µ—Å",
            expenses: {
                "–û–±—â–µ–∂–∏—Ç–∏–µ": 2000,
                "–ü–∏—Ç–∞–Ω–∏–µ": 8000,
                "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç": 2000,
                "–£—á–µ–±–∞": 1500,
                "–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è": 1000,
                "–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è": 500
            },
            goals: ["–ù–æ–≤—ã–π –Ω–æ—É—Ç–±—É–∫", "–ü–æ–µ–∑–¥–∫–∞ –¥–æ–º–æ–π –Ω–∞ –∫–∞–Ω–∏–∫—É–ª—ã"],
            correctChoices: ["–°–æ—Å—Ç–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–≥–∏–π –±—é–¥–∂–µ—Ç", "–ò—Å–∫–∞—Ç—å –ø–æ–¥—Ä–∞–±–æ—Ç–∫—É", "–≠–∫–æ–Ω–æ–º–∏—Ç—å –Ω–∞ –ø–∏—Ç–∞–Ω–∏–∏"],
            incorrectChoices: ["–í–∑—è—Ç—å –º–∏–∫—Ä–æ–∫—Ä–µ–¥–∏—Ç", "–ë—Ä–æ—Å–∏—Ç—å —É—á–µ–±—É", "–ü—Ä–æ–¥–∞—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω"]
        },
        {
            id: 5,
            name: "üíº –§—Ä–∏–ª–∞–Ω—Å–µ—Ä",
            description: "–ú–∞—Ä–∏—è, 32 –≥–æ–¥–∞. –†–∞–±–æ—Ç–∞–µ—Ç —É–¥–∞–ª–µ–Ω–Ω–æ, –¥–æ—Ö–æ–¥ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–π, —Å–Ω–∏–º–∞–µ—Ç –∫–≤–∞—Ä—Ç–∏—Ä—É.",
            income: "80 000 —Ä—É–±/–º–µ—Å",
            expenses: {
                "–ê—Ä–µ–Ω–¥–∞": 25000,
                "–ü–∏—Ç–∞–Ω–∏–µ": 15000,
                "–ù–∞–ª–æ–≥–∏": 7000,
                "–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è": 10000,
                "–¢–µ—Ö–Ω–∏–∫–∞": 5000,
                "–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è": 8000
            },
            goals: ["–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –ø–æ–¥—É—à–∫–∞", "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã"],
            correctChoices: ["–°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤", "–£—á–µ—Å—Ç—å —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å", "–°–æ–∫—Ä–∞—Ç–∏—Ç—å —Å–ø–æ–Ω—Ç–∞–Ω–Ω—ã–µ —Ç—Ä–∞—Ç—ã"],
            incorrectChoices: ["–ñ–∏—Ç—å –≤ –¥–æ–ª–≥", "–£–≤–µ–ª–∏—á–∏—Ç—å —Ç—Ä–∞—Ç—ã", "–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–ª–æ–≥–∏"]
        },
        {
            id: 6,
            name: "üë®‚Äçüë©‚Äçüë¶ –°–µ–º—å—è —Å –Ω–æ–≤–æ—Ä–æ–∂–¥–µ–Ω–Ω—ã–º",
            description: "–ê–Ω–¥—Ä–µ–π –∏ –°–≤–µ—Ç–ª–∞–Ω–∞, 30 –ª–µ—Ç. –ù–µ–¥–∞–≤–Ω–æ —Ä–æ–¥–∏–ª—Å—è —Ä–µ–±–µ–Ω–æ–∫, –°–≤–µ—Ç–ª–∞–Ω–∞ –≤ –¥–µ–∫—Ä–µ—Ç–µ.",
            income: "90 000 —Ä—É–±/–º–µ—Å",
            expenses: {
                "–ò–ø–æ—Ç–µ–∫–∞": 25000,
                "–ü–∏—Ç–∞–Ω–∏–µ": 20000,
                "–†–µ–±–µ–Ω–æ–∫": 15000,
                "–ê–≤—Ç–æ–º–æ–±–∏–ª—å": 10000,
                "–ö–æ–º–º—É–Ω–∞–ª–∫–∞": 7000,
                "–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è": 3000
            },
            goals: ["–ü–µ—Ä–µ–∂–∏—Ç—å –ø–µ—Ä–∏–æ–¥ —Å –æ–¥–Ω–∏–º –¥–æ—Ö–æ–¥–æ–º", "–†–µ–∑–µ—Ä–≤ –Ω–∞ –¥–µ—Ç—Å–∫–∏–µ –Ω—É–∂–¥—ã"],
            correctChoices: ["–°–æ–∫—Ä–∞—Ç–∏—Ç—å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–∞—Ç—ã", "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å–æ–±–∏—è", "–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∏—Ç–∞–Ω–∏–µ"],
            incorrectChoices: ["–í–∑—è—Ç—å –∫—Ä–µ–¥–∏—Ç", "–ü—Ä–æ–¥–∞—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—å", "–ü—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –∏–ø–æ—Ç–µ–∫—É"]
        },
        {
            id: 7,
            name: "üöó –¢–∞–∫—Å–∏—Å—Ç",
            description: "–í–∏–∫—Ç–æ—Ä, 45 –ª–µ—Ç. –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–≤–æ–µ–º –∞–≤—Ç–æ–º–æ–±–∏–ª–µ, –∏–º–µ–µ—Ç —Å–µ–º—å—é, –∫—Ä–µ–¥–∏—Ç –Ω–∞ –∞–≤—Ç–æ.",
            income: "70 000 —Ä—É–±/–º–µ—Å",
            expenses: {
                "–ö—Ä–µ–¥–∏—Ç –Ω–∞ –∞–≤—Ç–æ": 15000,
                "–ë–µ–Ω–∑–∏–Ω": 12000,
                "–ü–∏—Ç–∞–Ω–∏–µ": 18000,
                "–†–µ–º–æ–Ω—Ç": 5000,
                "–°–µ–º—å—è": 10000,
                "–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è": 3000
            },
            goals: ["–ü–æ–≥–∞—Å–∏—Ç—å –∫—Ä–µ–¥–∏—Ç –¥–æ—Å—Ä–æ—á–Ω–æ", "–†–µ–∑–µ—Ä–≤ –Ω–∞ —Ä–µ–º–æ–Ω—Ç"],
            correctChoices: ["–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã", "–§–æ–Ω–¥ –Ω–∞ –¢–û", "–†–µ—Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –∫—Ä–µ–¥–∏—Ç"],
            incorrectChoices: ["–†–∞–±–æ—Ç–∞—Ç—å –±–æ–ª—å—à–µ", "–í–∑—è—Ç—å –≤—Ç–æ—Ä–æ–π –∫—Ä–µ–¥–∏—Ç", "–≠–∫–æ–Ω–æ–º–∏—Ç—å –Ω–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–∏"]
        },
        {
            id: 8,
            name: "üè† –ê—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—å",
            description: "–ï–ª–µ–Ω–∞, 52 –≥–æ–¥–∞. –°–¥–∞–µ—Ç –¥–≤–µ –∫–≤–∞—Ä—Ç–∏—Ä—ã, –∏–º–µ–µ—Ç –ø–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥, –ø–æ–º–æ–≥–∞–µ—Ç –¥–µ—Ç—è–º.",
            income: "150 000 —Ä—É–±/–º–µ—Å",
            expenses: {
                "–ö–æ–º–º—É–Ω–∞–ª–∫–∞": 15000,
                "–†–µ–º–æ–Ω—Ç": 10000,
                "–ù–∞–ª–æ–≥–∏": 13000,
                "–ü–æ–º–æ—â—å –¥–µ—Ç—è–º": 20000,
                "–õ–∏—á–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã": 25000,
                "–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è": 22000
            },
            goals: ["–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å", "–ü–µ–Ω—Å–∏–æ–Ω–Ω—ã–π –∫–∞–ø–∏—Ç–∞–ª"],
            correctChoices: ["–î–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏", "–£—á–µ—Å—Ç—å –Ω–∞–ª–æ–≥–∏", "–§–æ–Ω–¥ –Ω–∞ —Ä–µ–º–æ–Ω—Ç"],
            incorrectChoices: ["–í–ª–æ–∂–∏—Ç—å –≤—Å–µ –≤ –æ–¥–Ω—É –∫–≤–∞—Ä—Ç–∏—Ä—É", "–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–ª–æ–≥–∏", "–ü—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –ø–æ–º–æ—â—å"]
        },
        {
            id: 9,
            name: "üë®‚Äçüíª IT-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç",
            description: "–ê—Ä—Ç–µ–º, 35 –ª–µ—Ç. –í—ã—Å–æ–∫–∏–π –¥–æ—Ö–æ–¥, –Ω–µ—Ç —Å–µ–º—å–∏, –∏–Ω–≤–µ—Å—Ç–∏—Ä—É–µ—Ç –≤ –∞–∫—Ü–∏–∏.",
            income: "300 000 —Ä—É–±/–º–µ—Å",
            expenses: {
                "–ê—Ä–µ–Ω–¥–∞": 60000,
                "–ü–∏—Ç–∞–Ω–∏–µ": 25000,
                "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏": 30000,
                "–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏": 50000,
                "–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è": 40000,
                "–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è": 45000
            },
            goals: ["–°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –∂–∏–ª—å–µ", "–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–π –ø–æ—Ä—Ç—Ñ–µ–ª—å"],
            correctChoices: ["–£–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏", "–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∞—Ä–µ–Ω–¥—É", "–ü–ª–∞–Ω –Ω–∞ –ø–æ–∫—É–ø–∫—É –∂–∏–ª—å—è"],
            incorrectChoices: ["–£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è", "–ü—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å", "–ò–ø–æ—Ç–µ–∫–∞ –±–µ–∑ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π"]
        },
        {
            id: 10,
            name: "üë©‚Äçüè´ –£—á–∏—Ç–µ–ª—å",
            description: "–ù–∞—Ç–∞–ª—å—è, 42 –≥–æ–¥–∞. –í–æ—Å–ø–∏—Ç—ã–≤–∞–µ—Ç –¥–æ—á—å-–ø–æ–¥—Ä–æ—Å—Ç–∫–∞ –æ–¥–Ω–∞, –∏–º–µ–µ—Ç –∏–ø–æ—Ç–µ–∫—É.",
            income: "45 000 —Ä—É–±/–º–µ—Å",
            expenses: {
                "–ò–ø–æ—Ç–µ–∫–∞": 15000,
                "–ü–∏—Ç–∞–Ω–∏–µ": 12000,
                "–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–æ—á–µ—Ä–∏": 8000,
                "–ö–æ–º–º—É–Ω–∞–ª–∫–∞": 5000,
                "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç": 3000,
                "–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è": 1000
            },
            goals: ["–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–æ—á–µ—Ä–∏", "–†–µ–º–æ–Ω—Ç –≤ –∫–≤–∞—Ä—Ç–∏—Ä–µ"],
            correctChoices: ["–ò—Å–∫–∞—Ç—å –¥–æ–ø. –¥–æ—Ö–æ–¥", "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—å–≥–æ—Ç—ã", "–°—Ç—Ä–æ–≥–∏–π –±—é–¥–∂–µ—Ç"],
            incorrectChoices: ["–ö—Ä–µ–¥–∏—Ç –Ω–∞ —Ä–µ–º–æ–Ω—Ç", "–ü—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –∑–∞–Ω—è—Ç–∏—è", "–û—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏"]
        }
    ];

    let currentProfile = 0;
    let totalScore = 0;
    let userAnswers = [];

    function showProfile() {
        if (currentProfile >= profiles.length) {
            showFinalResults();
            return;
        }

        const profile = profiles[currentProfile];
        const totalExpenses = Object.values(profile.expenses).reduce((a, b) => a + b, 0);
        const freeMoney = parseInt(profile.income.replace(/\D/g, '')) - totalExpenses;
        
        budgetContent.innerHTML = `
            <div class="policy-game-profile">
                <div class="profile-header">
                    <h3>${profile.name}</h3>
                    <div class="profile-progress">
                        –°–µ–º—å—è ${currentProfile + 1} –∏–∑ ${profiles.length}
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${((currentProfile + 1) / profiles.length) * 100}%"></div>
                        </div>
                    </div>
                </div>
                
                <div class="profile-info">
                    <div class="profile-description">
                        <h4>–û–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏:</h4>
                        <p>${profile.description}</p>
                        <p><strong>–î–æ—Ö–æ–¥:</strong> ${profile.income}</p>
                    </div>
                    
                    <div class="current-budget">
                        <h4>–¢–µ–∫—É—â–∏–π –±—é–¥–∂–µ—Ç:</h4>
                        <div class="expenses-list">
                            ${Object.entries(profile.expenses).map(([category, amount]) => `
                                <div class="expense-item">
                                    <span class="expense-category">${category}</span>
                                    <span class="expense-amount">${amount.toLocaleString()} —Ä—É–±</span>
                                </div>
                            `).join('')}
                            <div class="expense-total">
                                <strong>–ò—Ç–æ–≥–æ —Ä–∞—Å—Ö–æ–¥—ã:</strong> ${totalExpenses.toLocaleString()} —Ä—É–±
                            </div>
                            <div class="free-money ${freeMoney >= 0 ? 'positive' : 'negative'}">
                                <strong>–°–≤–æ–±–æ–¥–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞:</strong> ${freeMoney.toLocaleString()} —Ä—É–±
                            </div>
                        </div>
                    </div>

                    <div class="financial-goals">
                        <h4>–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ü–µ–ª–∏:</h4>
                        <ul>
                            ${profile.goals.map(goal => `<li>${goal}</li>`).join('')}
                        </ul>
                    </div>
                </div>

                <div class="policies-selection">
                    <h4>–ö–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±—é–¥–∂–µ—Ç?</h4>
                    <p class="selection-hint">–í—ã–±–µ—Ä–∏—Ç–µ 2-3 –Ω–∞–∏–±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:</p>
                    
                    <div class="policies-grid">
                        ${[...profile.correctChoices, ...profile.incorrectChoices]
                            .sort(() => Math.random() - 0.5)
                            .map((choice, index) => `
                                <label class="policy-checkbox">
                                    <input type="checkbox" value="${choice}" 
                                           data-correct="${profile.correctChoices.includes(choice)}">
                                    <span class="checkmark"></span>
                                    <div class="policy-info">
                                        <strong>${choice}</strong>
                                    </div>
                                </label>
                            `).join('')}
                    </div>
                    
                    <div class="selection-summary">
                        <div class="selected-count">
                            –í—ã–±—Ä–∞–Ω–æ: <span id="selected-count">0</span> –∏–∑ 3
                        </div>
                    </div>

                    <button class="btn btn-primary" onclick="checkBudgetSelection()" id="check-button">
                        –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã–±–æ—Ä
                    </button>
                </div>
            </div>
        `;

        // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –≤—ã–±–æ—Ä 3 –ø—É–Ω–∫—Ç–∞–º–∏
        const checkboxes = document.querySelectorAll('input[type="checkbox"]');
        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const checked = document.querySelectorAll('input[type="checkbox"]:checked');
                if (checked.length > 3) {
                    this.checked = false;
                }
                document.getElementById('selected-count').textContent = checked.length;
            });
        });
    }

    window.checkBudgetSelection = function() {
        const selectedChoices = Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
            .map(checkbox => ({
                text: checkbox.value,
                correct: checkbox.dataset.correct === 'true'
            }));
        
        const profile = profiles[currentProfile];
        
        // –ê–Ω–∞–ª–∏–∑ –≤—ã–±–æ—Ä–∞
        const correctSelected = selectedChoices.filter(choice => choice.correct).length;
        const incorrectSelected = selectedChoices.filter(choice => !choice.correct).length;
        
        // –†–∞—Å—á–µ—Ç –±–∞–ª–ª–æ–≤ (–º–∞–∫—Å–∏–º—É–º 3 –±–∞–ª–ª–∞ –∑–∞ –ø—Ä–æ—Ñ–∏–ª—å)
        let roundScore = Math.max(0, correctSelected - incorrectSelected);
        totalScore += roundScore;
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç—ã
        userAnswers.push({
            profile: profile.name,
            selected: selectedChoices,
            score: roundScore
        });
        
        showRoundResults(profile, selectedChoices, correctSelected, incorrectSelected, roundScore);
    };

    function showRoundResults(profile, selectedChoices, correctSelected, incorrectSelected, roundScore) {
        budgetContent.innerHTML = `
            <div class="policy-results">
                <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è ${profile.name}</h3>
                
                <div class="score-breakdown">
                    <div class="score-card correct">
                        <h4>‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è</h4>
                        <div class="score-number">${correctSelected}</div>
                        <div class="policies-list">
                            ${selectedChoices.filter(choice => choice.correct)
                                .map(choice => `
                                    <div class="policy-item selected">
                                        ${choice.text} ‚úì
                                    </div>
                                `).join('')}
                            ${profile.correctChoices.filter(correct => 
                                !selectedChoices.some(selected => selected.text === correct)
                            ).map(correct => `
                                <div class="policy-item missed">
                                    ${correct} ‚úó
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="score-card incorrect">
                        <h4>‚ùå –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è</h4>
                        <div class="score-number">${incorrectSelected}</div>
                        <div class="policies-list">
                            ${selectedChoices.filter(choice => !choice.correct)
                                .map(choice => `
                                    <div class="policy-item extra">
                                        ${choice.text}
                                    </div>
                                `).join('') || '<div class="no-policies">–ù–µ—Ç –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π</div>'}
                        </div>
                    </div>
                </div>
                
                <div class="expert-explanation">
                    <h4>üí° –°–æ–≤–µ—Ç—ã —ç–∫—Å–ø–µ—Ä—Ç–∞:</h4>
                    <p>${getExpertAdvice(profile)}</p>
                </div>
                
                <div class="round-score">
                    <h4>–ë–∞–ª–ª—ã –∑–∞ —Ä–∞—É–Ω–¥: <span class="score-value">${roundScore}</span></h4>
                </div>
                
                <button class="btn btn-primary" onclick="nextProfile()">
                    ${currentProfile < profiles.length - 1 ? '–°–ª–µ–¥—É—é—â–∞—è —Å–µ–º—å—è' : '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã'}
                </button>
            </div>
        `;
    }

    function getExpertAdvice(profile) {
        const advice = {
            1: "–ú–æ–ª–æ–¥–æ–π –ø–∞—Ä–µ —Å—Ç–æ–∏—Ç —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è—Ö. –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –ø–æ–º–æ–≥—É—Ç –±—ã—Å—Ç—Ä–µ–µ –Ω–∞–∫–æ–ø–∏—Ç—å –Ω–∞ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å.",
            2: "–°–µ–º—å–µ —Å –¥–µ—Ç—å–º–∏ –≤–∞–∂–Ω–æ –Ω–∞–π—Ç–∏ –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Ç–µ–∫—É—â–∏–º–∏ –Ω—É–∂–¥–∞–º–∏ –∏ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–º–∏ —Ü–µ–ª—è–º–∏. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –º–æ–∂–µ—Ç –≤—ã—Å–≤–æ–±–æ–¥–∏—Ç—å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞.",
            3: "–ü–µ–Ω—Å–∏–æ–Ω–µ—Ä–∫–µ –≤–∞–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ª—å–≥–æ—Ç—ã. –ù–µ–±–æ–ª—å—à–æ–π, –Ω–æ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π —Ä–µ–∑–µ—Ä–≤ –ø–æ–º–æ–∂–µ—Ç –≤ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.",
            4: "–°—Ç—É–¥–µ–Ω—Ç—É –≤–∞–∂–Ω–æ –Ω–∞—É—á–∏—Ç—å—Å—è –∂–∏—Ç—å –ø–æ —Å—Ä–µ–¥—Å—Ç–≤–∞–º. –°–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–≥–æ–≥–æ –±—é–¥–∂–µ—Ç–∞ –∏ –ø–æ–∏—Å–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–æ—Ö–æ–¥–æ–≤ - –∫–ª—é—á –∫ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏.",
            5: "–§—Ä–∏–ª–∞–Ω—Å–µ—Ä—É –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –ø–æ–¥—É—à–∫–∞. –£—á–µ—Ç —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏ –¥–æ—Ö–æ–¥–æ–≤ –∏ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Å–ø–æ–Ω—Ç–∞–Ω–Ω—ã—Ö —Ç—Ä–∞—Ç –ø–æ–º–æ–≥—É—Ç –ø–µ—Ä–µ–∂–∏—Ç—å –ø–µ—Ä–∏–æ–¥—ã –±–µ–∑ —Ä–∞–±–æ—Ç—ã.",
            6: "–°–µ–º—å–µ —Å –æ–¥–Ω–∏–º –¥–æ—Ö–æ–¥–æ–º –≤–∞–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ä–∞—Å—Ö–æ–¥—ã –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É. –î–∞–∂–µ –Ω–µ–±–æ–ª—å—à–∞—è —ç–∫–æ–Ω–æ–º–∏—è –ø–æ–º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤.",
            7: "–¢–∞–∫—Å–∏—Å—Ç—É –≤–∞–∂–Ω–æ —Å–∏—Å—Ç–µ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–æ–Ω–¥–∞ –Ω–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è —Å–Ω–∏–∑—è—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é –Ω–∞–≥—Ä—É–∑–∫—É.",
            8: "–ê—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—é –≤–∞–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –ø–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥ –º–µ–∂–¥—É —Ç–µ–∫—É—â–∏–º–∏ –Ω—É–∂–¥–∞–º–∏ –∏ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–º–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è–º–∏. –î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞—â–∏—Ç–∏—Ç –æ—Ç —Ä–∏—Å–∫–æ–≤.",
            9: "–ü—Ä–∏ –≤—ã—Å–æ–∫–æ–º –¥–æ—Ö–æ–¥–µ –≤–∞–∂–Ω–æ –º–∞–∫—Å–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏. –°–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –¥–æ–ª–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –≤ –±—é–¥–∂–µ—Ç–µ —É—Å–∫–æ—Ä–∏—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ü–µ–ª–µ–π.",
            10: "–ü—Ä–∏ —Å–∫—Ä–æ–º–Ω–æ–º –¥–æ—Ö–æ–¥–µ –≤–∞–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ª—å–≥–æ—Ç—ã –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –¥–≤–∏–≥–∞—Ç—å—Å—è –∫ —Ü–µ–ª—è–º. –ü–æ–∏—Å–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–æ—Ö–æ–¥–∞ –º–æ–∂–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∏—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é."
        };
        return advice[profile.id] || "–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞ - –∫–ª—é—á –∫ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏.";
    }

    window.nextProfile = function() {
        currentProfile++;
        showProfile();
    };

    function showFinalResults() {
        const maxPossibleScore = profiles.length * 3;
        const percentage = (totalScore / maxPossibleScore) * 100;
        
        let message = '';
        let emoji = '';
        
        if (percentage >= 80) {
            message = "–û—Ç–ª–∏—á–Ω–æ! –í—ã –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–∑–±–∏—Ä–∞–µ—Ç–µ—Å—å –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –±—é–¥–∂–µ—Ç–∞!";
            emoji = "üèÜ";
        } else if (percentage >= 60) {
            message = "–•–æ—Ä–æ—à–æ! –í—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ –æ—Å–Ω–æ–≤—ã —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è!";
            emoji = "‚≠ê";
        } else {
            message = "–ï—Å—Ç—å –Ω–∞–¥ —á–µ–º –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å! –ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ—Å—å –∏ –∏–∑—É—á–∞–π—Ç–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å!";
            emoji = "üìö";
        }

        budgetContent.innerHTML = `
            <div class="policy-final-results">
                <h3>–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</h3>
                
                <div class="final-score-display">
                    <div class="score-circle">
                        <span class="score">${totalScore}/${maxPossibleScore}</span>
                    </div>
                    <div class="score-percentage">${Math.round(percentage)}%</div>
                </div>
                
                <div class="result-emoji">${emoji}</div>
                <p class="result-message">${message}</p>
                
                <div class="profiles-summary">
                    <h4>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ 10 —Å–µ–º—å—è–º:</h4>
                    <div class="profiles-grid">
                        ${userAnswers.map((answer, index) => `
                            <div class="profile-result ${answer.score > 0 ? 'good' : 'bad'}">
                                <strong>${answer.profile}</strong>
                                <div class="mini-score">${answer.score} –±–∞–ª–ª(–æ–≤)</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="results-details">
                    <button class="btn btn-primary" onclick="restartBudgetGame()">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
                    <button class="btn btn-secondary" onclick="backToGames()">–ö —Å–ø–∏—Å–∫—É –∏–≥—Ä</button>
                </div>
            </div>
        `;
    }

    window.restartBudgetGame = function() {
        currentProfile = 0;
        totalScore = 0;
        userAnswers = [];
        showProfile();
    };

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
    showProfile();
}

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
if (document.getElementById('budget-content')) {
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initBudgetGame);
    } else {
        initBudgetGame();
    }
}